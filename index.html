<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="聖なる招待状を手に、君だけの冒険譚を紡げ">
    <meta name="keywords" content="Splatoon3,大会,ばーばりあんず,2025夏,P杯,冒険の書,参加者,役職,対戦形式,旅の行程,神託,エンディング,PARABLE CUP">
    <meta name="author" content="ばーばりあんず">
    <meta name="theme-color" content="#FDFDFB">
    <meta name="application-name" content="ばーばりあんず Splatoon3大会 2025夏 PARABLE CUP 冒険の書">
    <title>ばーばりあんず Splatoon3大会 2025夏 "PARABLE CUP" 冒険の書</title>

    <!-- OGP (Open Graph Protocol) and Twitter Card Tags -->
    <meta property="og:title" content="ばーばりあんず Splatoon3大会 2025夏 PARABLE CUP 冒険の書">
    <meta property="og:description" content="聖なる招待状を手に、君だけの冒険譚を紡げ">
    <meta property="og:image" content="https://takap1.github.io/barbarians2025splatoon3_summer_p/images/ogimage.png">
    <meta property="og:url" content="https://takap1.github.io/barbarians2025splatoon3_summer_p/">
    <meta property="og:site_name" content="ばーばりあんず Splatoon3大会 2025夏 PARABLE CUP 冒険の書">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ばーばりあんず Splatoon3大会 2025夏 PARABLE CUP 冒険の書">
    <meta name="twitter:description" content="聖なる招待状を手に、君だけの冒険譚を紡げ">
    <meta name="twitter:image" content="https://takap1.github.io/barbarians2025splatoon3_summer_p/images/ogimage.png">
    <link rel="icon" href="https://takap1.github.io/barbarians2025splatoon3_summer_p/images/x-icon.png" type="image/x-icon">
    <link rel="icon" href="https://takap1.github.io/barbarians2025splatoon3_summer_p/images/x-icon.png" type="image/png">
    <link rel="icon" href="https://takap1.github.io/barbarians2025splatoon3_summer_p/images/x-icon.png" type="image/svg+xml">
    <link rel="shortcut icon" href="https://takap1.github.io/barbarians2025splatoon3_summer_p/images/x-icon.png" type="image/x-icon">
    <link rel="shortcut icon" href="https://takap1.github.io/barbarians2025splatoon3_summer_p/images/x-icon.png" type="image/png">
    <link rel="shortcut icon" href="https://takap1.github.io/barbarians2025splatoon3_summer_p/images/x-icon.png" type="image/svg+xml">
    <link rel="apple-touch-icon" href="https://takap1.github.io/barbarians2025splatoon3_summer_p/images/x-icon.png">
    <link rel="apple-touch-icon" href="https://takap1.github.io/barbarians2025splatoon3_summer_p/images/x-icon.png" type="image/x-icon">
    <link rel="apple-touch-icon" href="https://takap1.github.io/barbarians2025splatoon3_summer_p/images/x-icon.png" type="image/png">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kiwi+Maru:wght@400;500&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Ancient Scroll -->
    <!-- Application Structure Plan: このSPAは、参加者が物語の主人公になった気分を味わえるよう、上から下へ読み進める「冒険の書」として設計されています。ナビゲーションで各章に飛ぶことも可能ですが、基本は物語を追うようにスクロールすることで、大会の全貌と世界観を自然に理解できます。インタラクティブな「役職紹介」や「旅の行程」を通じて、参加者は自身の役割やこれから挑む試練を直感的に把握し、大会への期待感を最大限に高めることができます。 -->
    <!-- Visualization & Content Choices: 定量的なデータグラフの代わりに、大会の構造と物語性を視覚化することに重点を置いています。「役職」はアイコン付きのカードで表現し、クリックで詳細（スペシャルウェポンリスト）が展開するインタラクションを採用しました。これにより、情報を整理しつつ、探索する楽しさを提供します。「旅の行程」は、物語の進行を示すタイムライン風のレイアウトで各章を紹介。これもクリックで詳細が開きます。これにより、参加者は冒険の道のりを視覚的に追体験できます。対戦表は、情報の網羅性を重視し、シンプルなテーブルで提示します。これらの選択は、参加者の没入感を高め、複雑なルールを楽しく理解させることを目的としています。 -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #FDFDFB;
            color: #383838;
            overflow-x: hidden;
        }
        .font-kiwi {
            font-family: 'Kiwi Maru', serif;
        }
        .bg-pattern {
            background-image:
                radial-gradient(circle at center, rgba(0,0,0,0.03) 1px, transparent 1px);
            background-size: 20px 20px;
            transition: background-position 0.1s linear;
        }
        .scroll-smooth {
            scroll-behavior: smooth;
        }
        .nav-link {
            transition: all 0.3s ease;
            position: relative;
        }
        .nav-link:after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background-color: #D4AF37;
            transition: all 0.3s ease;
        }
        .nav-link:hover:after, .nav-link.active:after {
            width: 100%;
        }
        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .journey-step-connector {
            flex-grow: 1;
            height: 2px;
            background-color: #e2e8f0;
        }
        @media (max-width: 767px) {
            .journey-step-connector {
                width: 2px;
                height: 3rem;
                flex-grow: 0;
            }
        }
        .animated-element {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .animated-element.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        .logo-container {
            position: relative;
        }
        .logo-main {
            transform: scale(0);
            opacity: 0;
            animation: pop-in 1s cubic-bezier(0.68, -0.55, 0.27, 1.55) 0.5s forwards;
        }
        .ink-splat {
            position: absolute;
            background-color: #8A2BE2; /* 紫 */
            border-radius: 50%;
            transform: scale(0);
            opacity: 0;
            animation: burst 0.8s ease-out forwards;
        }
        .ink-splat.yellow {
            background-color: #FFD700; /* 黄色 */
        }
        @keyframes pop-in {
            0% { transform: scale(0); opacity: 0; }
            80% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes burst {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }
        .animated-title span {
            display: inline-block;
            opacity: 0;
            transform: translateY(20px);
            animation: letter-fade-in 0.5s forwards;
        }
        @keyframes letter-fade-in {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .parallax-splat {
            position: absolute;
            background-color: rgba(212, 175, 55, 0.2);
            border-radius: 50%;
            transition: transform 0.2s ease-out;
            will-change: transform;
        }
    </style>
</head>
<body class="bg-pattern">
    <div id="parallax-container" class="fixed top-0 left-0 w-full h-full -z-10 overflow-hidden"></div>

    <header class="sticky top-0 bg-white/80 backdrop-blur-sm z-50 shadow-md">
        <nav class="container mx-auto px-4">
            <div class="flex justify-between items-center py-3">
                <div class="font-kiwi text-xl font-bold text-gray-800">冒険の書</div>
                <div class="hidden md:flex flex-wrap items-center justify-center space-x-4 text-sm font-bold">
                    <a href="#prologue" class="nav-link text-gray-600 hover:text-gray-900">序章</a>
                    <a href="#schedule" class="nav-link text-gray-600 hover:text-gray-900">冒険の旅程</a>
                    <a href="#rules" class="nav-link text-gray-600 hover:text-gray-900">冒険の掟</a>
                    <a href="#roles" class="nav-link text-gray-600 hover:text-gray-900">伝説の役職</a>
                    <a href="#matchups" class="nav-link text-gray-600 hover:text-gray-900">対戦形式</a>
                    <a href="#journey" class="nav-link text-gray-600 hover:text-gray-900">試練の行程</a>
                    <a href="#oracle" class="nav-link text-gray-600 hover:text-gray-900">賢者の神託</a>
                    <a href="#endings" class="nav-link text-gray-600 hover:text-gray-900">運命の結末</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-8 md:py-16">
        
        <section id="top" class="text-center py-16 md:py-24 border-b-2 border-dashed border-gray-300">
            <div class="max-w-2xl mx-auto mb-8 logo-container">
                <img src="images/title.png" alt="PARABLE CUP Logo" class="w-full h-auto logo-main">
            </div>
            <h1 id="main-title" class="font-kiwi text-4xl md:text-5xl font-bold my-4 text-gray-800"></h1>
            <p id="sub-title" class="text-lg md:text-xl text-gray-600 mt-2"></p>
        </section>

        <section id="prologue" class="py-12 md:py-20">
            <h2 class="font-kiwi text-3xl text-center font-medium mb-8 text-gray-800 animated-element">序章：冒険への誘い</h2>
            <div class="max-w-3xl mx-auto bg-amber-50/50 p-8 rounded-lg border border-amber-200 shadow-sm text-center animated-element">
                <p class="text-2xl font-kiwi leading-relaxed text-gray-700">
                    “君たちはそれぞれの地で名を馳せた冒険者──”
                </p>
                <p class="mt-6 text-base leading-loose text-gray-600">
                    ある日、君たちの元に遠き海底宮殿への「聖なる招待状」が届く。
                    それは、世界に平和をもたらす「四英雄」の再来として召喚された証。
                </p>
                <p class="mt-4 text-base leading-loose text-gray-600">
                    さあ、運命に導かれた仲間と共にパーティーを結成し、旅立とう。
                    黄金の潮流を辿り、封印の扉を開き、天空へと至る壮大な旅へ。
                </p>
                <div class="mt-8 text-sm text-gray-500 bg-gray-100 p-4 rounded-lg">
                    <p>本大会の "P" とは「PARABLE（パラブル）」の頭文字。「PARABLE」とは「例え話」を意味する。今大会がロールプレイをベースとしたRPG風の大会で、運営主体のストーリーテリングから参加者が1本のストーリー（お話）を結末まで導くという内容にピッタリの言葉である。</p>
                </div>
                <p class="mt-8 font-bold text-lg text-yellow-800 bg-yellow-100 rounded-md py-3">
                    最終目標：海底宮殿「リュウグウターミナル」に眠る“真の王権”を手にすること。
                </p>
            </div>
        </section>
        
        <section id="schedule" class="py-12 md:py-20">
            <h2 class="font-kiwi text-3xl text-center font-medium mb-12 text-gray-800 animated-element">冒険の旅程</h2>
            <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 text-center">
                <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-yellow-400 card animated-element">
                    <p class="font-kiwi text-xl font-bold text-yellow-600 mb-2">7月6日 (日)</p>
                    <h3 class="text-xl font-bold font-kiwi mb-2">勇者発表</h3>
                    <p class="text-sm text-gray-600">
                        GMがアンケートを元に各チームのリーダーとなる「勇者」を4名選定し、発表する。
                    </p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-yellow-400 card animated-element" style="transition-delay: 0.1s;">
                     <p class="font-kiwi text-xl font-bold text-yellow-600 mb-2">7月7日 (月)</p>
                    <h3 class="text-xl font-bold font-kiwi mb-2">運命のドラフト</h3>
                    <p class="text-sm text-gray-600">
                        選ばれし勇者たちが、共に戦う仲間を1名だけ指名する。指名が重複した場合、希望役職の近さやルーレットで運命が決まる。
                    </p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-yellow-400 card animated-element" style="transition-delay: 0.2s;">
                     <p class="font-kiwi text-xl font-bold text-yellow-600 mb-2">7月8日 (火)</p>
                    <h3 class="text-xl font-bold font-kiwi mb-2">パーティー結成</h3>
                    <p class="text-sm text-gray-600">
                        ドラフトを経て、最終的な4人パーティーが決定。全4チームがここに誕生する。
                    </p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-red-500 card animated-element" style="transition-delay: 0.3s;">
                     <p class="font-kiwi text-xl font-bold text-red-600 mb-2">7月13日 (日)</p>
                    <h3 class="text-xl font-bold font-kiwi mb-2">大会当日</h3>
                    <p class="text-sm text-gray-600">
                        20時より、聖なる旅路が幕を開ける。全ての準備を整え、決戦の時に備えよ。
                    </p>
                </div>
            </div>
        </section>

        <section id="rules" class="py-12 md:py-20">
            <h2 class="font-kiwi text-3xl text-center font-medium mb-12 text-gray-800 animated-element">冒険の掟</h2>
            <div class="max-w-2xl mx-auto bg-amber-50/50 p-8 rounded-lg border border-amber-200 shadow-sm animated-element">
                <h3 class="text-xl font-bold font-kiwi mb-4 text-center">ブキの固定と提出</h3>
                <p class="text-gray-600 leading-relaxed mb-4">
                    本大会では、各冒険者は大会開始前に提出した一つのブキのみで、全ての試練に挑むこととなる。これは、各々の役職を全うするための重要な掟である。
                </p>
                <p class="font-bold text-gray-700">提出方法：</p>
                <p class="text-gray-600 leading-relaxed mt-2">
                    大会当日のチェックイン時に、イカリング3の「ヒストリー」から、使用するブキが写っているスクリーンショットを所定の報告スレッドに提出せよ。
                </p>
                <div class="mt-4 border-l-4 border-yellow-600 pl-4 italic text-gray-500">
                    <p class="font-bold">報告例：</p>
                    <p>大会チェックインしました！</p>
                    <p>チームA / takapi™ / 魔法使い / ショクワンダー</p>
                    <img src="images/screenshot.jpg" alt="スクリーンショット" class="w-full h-auto">
                </div>
            </div>
        </section>

        <section id="roles" class="py-12 md:py-20">
            <h2 class="font-kiwi text-3xl text-center font-medium mb-12 text-gray-800 animated-element">伝説の役職</h2>
            <div id="roles-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
            </div>
        </section>
        
        <section id="matchups" class="py-12 md:py-20">
            <h2 class="font-kiwi text-3xl text-center font-medium mb-12 text-gray-800 animated-element">対戦形式：運命の天秤</h2>
            <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                <div class="bg-white p-6 rounded-lg shadow-md animated-element">
                    <h3 class="text-xl font-bold font-kiwi mb-3 text-yellow-700">第一の試練：運命の導き</h3>
                    <p class="text-sm text-gray-600">
                        最初の対戦は、天秤の導きによりランダムに決定される。全ての冒険者に等しく、最初の扉が開かれる。
                    </p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md animated-element" style="transition-delay: 0.1s;">
                    <h3 class="text-xl font-bold font-kiwi mb-3 text-yellow-700">第二の試練以降：魂の共鳴</h3>
                    <p class="text-sm text-gray-600">
                        二つ目の試練より、戦いの天秤が動き出す。勝利という同じ重みを持つ者同士が、互いの力を試し合う。強者はより強者と、敗者は再起をかけて、それぞれの道を進む。
                    </p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md animated-element" style="transition-delay: 0.2s;">
                    <h3 class="text-xl font-bold font-kiwi mb-3 text-yellow-700">王権への道</h3>
                    <p class="text-sm text-gray-600">
                        定められた全ての試練を終えた時、最も多くの勝利を積み重ねたパーティーが、真の王権への挑戦権を得る。
                    </p>
                </div>
            </div>
            <div class="text-center mt-10 max-w-2xl mx-auto animated-element">
                <p class="text-sm text-gray-500 bg-gray-100 p-4 rounded-lg">
                    <span class="font-bold">注：</span>対戦の組み合わせは、各チャプター（回戦）の開始時にGMより発表されます。
                    本大会では任天堂公式の「タイカイサポート」機能を使用し、公正な組み合わせを自動で決定します。
                </p>
            </div>
        </section>

        <section id="journey" class="py-12 md:py-20">
            <h2 class="font-kiwi text-3xl text-center font-medium mb-12 text-gray-800 animated-element">全5回戦の試練</h2>
            <div id="journey-steps" class="flex flex-col md:flex-row items-stretch justify-center gap-4 md:gap-0">
            </div>
        </section>

        <section id="oracle" class="py-12 md:py-20">
            <h2 class="font-kiwi text-3xl text-center font-medium mb-12 text-gray-800 animated-element">✨ 賢者の神託 ✨</h2>
            <div class="max-w-xl mx-auto bg-white p-6 rounded-lg shadow-md animated-element">
                <textarea id="oracle-question" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-400 focus:outline-none" rows="3" placeholder="ここに賢者への質問を記入せよ... (例：勇者としてヤグラでどう立ち回ればいい？)"></textarea>
                <button id="ask-oracle-btn" class="mt-4 w-full bg-yellow-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-yellow-700 transition-colors duration-300 flex items-center justify-center disabled:bg-gray-400">
                    <span id="oracle-btn-text">神託を授かる</span>
                    <div id="oracle-loader" class="hidden w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin ml-3"></div>
                </button>
                <div id="oracle-response" class="mt-6 p-4 bg-gray-100 rounded-md text-gray-700 hidden leading-relaxed whitespace-pre-wrap"></div>
            </div>
        </section>

        <section id="endings" class="py-12 md:py-20">
            <h2 class="font-kiwi text-3xl text-center font-medium mb-12 text-gray-800 animated-element">運命の結末</h2>
            <div id="endings-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            </div>
        </section>
    </main>
    
    <footer class="text-center py-8 bg-gray-100 border-t border-gray-200">
        <p class="text-sm text-gray-500">最高の冒険を、全ての挑戦者に。</p>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const specialIcons = {
        'ウルトラショット': 'https://api.ikaclo.ink/images/weapons/special/special_027.png',
        'ウルトラチャクチ': 'https://api.ikaclo.ink/images/weapons/special/special_042.png',
        'トリプルトルネード': 'https://api.ikaclo.ink/images/weapons/special/special_030.png',
        'ウルトラハンコ': 'https://api.ikaclo.ink/images/weapons/special/special_037.png',
        'カニタンク': 'https://api.ikaclo.ink/images/weapons/special/special_024.png',
        'テイオウイカ': 'https://api.ikaclo.ink/images/weapons/special/special_039.png',
        'メガホンレーザー5.1ch': 'https://api.ikaclo.ink/images/weapons/special/special_028.png',
        'スミナガシート': 'https://api.ikaclo.ink/images/weapons/special/special_041.png',
        'ショクワンダー': 'https://api.ikaclo.ink/images/weapons/special/special_026.png',
        'サメライド': 'https://api.ikaclo.ink/images/weapons/special/special_033.png',
        'グレートバリア': 'https://api.ikaclo.ink/images/weapons/special/special_025.png',
        'アメフラシ': 'https://api.ikaclo.ink/images/weapons/special/special_036.png',
        'キューインキ': 'https://api.ikaclo.ink/images/weapons/special/special_029.png',
        'デコイチラシ': 'https://api.ikaclo.ink/images/weapons/special/special_040.png',
        'ホップソナー': 'https://api.ikaclo.ink/images/weapons/special/special_032.png',
        'ナイスダマ': 'https://api.ikaclo.ink/images/weapons/special/special_038.png',
        'ジェットパック': 'https://api.ikaclo.ink/images/weapons/special/special_035.png',
        'マルチミサイル': 'https://api.ikaclo.ink/images/weapons/special/special_034.png',
        'エナジースタンド': 'https://api.ikaclo.ink/images/weapons/special/special_031.png'
    };

    const rolesData = [
        { name: '勇者', image: 'images/hero_2.png', title: '決戦兵器', specials: ['ウルトラショット', 'ウルトラチャクチ', 'トリプルトルネード'] },
        { name: '戦士', image: 'images/warrior_2.png', title: '突撃隊長', specials: ['ウルトラハンコ', 'カニタンク', 'テイオウイカ'] },
        { name: '魔法使い', image: 'images/wizard_2.png', title: '戦場の魔術師', specials: ['メガホンレーザー5.1ch', 'スミナガシート', 'ショクワンダー', 'サメライド'] },
        { name: '僧侶', image: 'images/monk_2.png', title: '守護神', specials: ['グレートバリア', 'アメフラシ', 'キューインキ'] },
        { name: '盗賊', image: 'images/thief_2.png', title: '影の追跡者', specials: ['デコイチラシ', 'ホップソナー', 'ナイスダマ'] },
        { name: '遊び人', image: 'images/player_2.png', title: '混沌の道化師', specials: ['ジェットパック', 'マルチミサイル', 'エナジースタンド'] }
    ];

    const chaptersData = [
        { round: '第一回戦', name: '出発の丘', stage: 'ヒラメが丘団地', rule: 'エリア', theme: '「故郷の丘から冒険が始まる」', image: 'images/st1_hirame.jpg' },
        { round: '第二回戦', name: '山岳の試練', stage: 'ユノハナ大渓谷', rule: 'ヤグラ', theme: '「霧煙の谷を越え、高所を制圧せよ」', image: 'images/st2_yunohana.jpg' },
        { round: '第三回戦', name: '封印の遺跡', stage: 'ナンプラー遺跡', rule: 'エリア', theme: '「古の神殿に封印された光を取り戻せ」', image: 'images/st3_nampla.jpg' },
        { round: '第四回戦', name: '海底の巨艦', stage: 'チョウザメ造船', rule: 'ヤグラ', theme: '「深海に沈む巨艦を奪還せよ」', image: 'images/st4_chouzame.jpg' },
        { round: '第五回戦', name: '空への門', stage: 'カジキ空港', rule: 'エリア', theme: '「滑走路の先にある大空を掴み取れ」', image: 'images/st5_kajiki.jpg' }
    ];

    const endingsData = [
        { rank: '1位', name: 'グッドエンディング', icon: '👑', location: 'リュウグウターミナル', description: '海底宮殿で讃えられる最高の結末。' },
        { rank: '2位', name: 'セカンドエンディング', icon: '✨', location: 'オヒョウ海運ターミナル', description: '荒波越えの港で誓い合う、誇り高き結末。' },
        { rank: '3位', name: 'サードエンディング', icon: '🍜', location: 'バイガイ亭', description: 'ラーメン屋で一息つく、仲間との絆の結末。' },
        { rank: '4位', name: 'ノーマルエンディング', icon: '🏡', location: 'ヒラメが丘団地', description: '故郷へ帰還する、懐かしくもほろ苦い結末。' }
    ];

    const rolesGrid = document.getElementById('roles-grid');
    rolesData.forEach((role, index) => {
        const card = document.createElement('div');
        card.className = 'card bg-white rounded-lg shadow-lg overflow-hidden animated-element';
        card.style.transitionDelay = `${index * 0.1}s`;
        const placeholderUrl = `https://placehold.co/400x560/e9d8a6/383838?text=${encodeURIComponent(role.name)}`;
        card.innerHTML = `
            <img src="${role.image}" alt="${role.name}" class="w-full h-auto" onerror="this.onerror=null;this.src='${placeholderUrl}';">
             <div class="p-4 bg-amber-50">
                 <h3 class="text-xl font-kiwi font-bold text-center text-gray-800">${role.name}</h3>
                 <div class="mt-4">
                    <h4 class="font-bold text-sm text-center mb-2 text-gray-700">使えるスペシャル</h4>
                    <div class="flex justify-center items-center space-x-2">
                        ${role.specials.map(sp => `<img src="${specialIcons[sp]}" alt="${sp}" class="w-10 h-10" title="${sp}">`).join('')}
                    </div>
                </div>
            </div>
        `;
        rolesGrid.appendChild(card);
    });

    const journeyStepsContainer = document.getElementById('journey-steps');
    chaptersData.forEach((chapter, index) => {
        const step = document.createElement('div');
        step.className = 'w-full md:w-1/5 p-2 flex flex-col animated-element';
        step.style.transitionDelay = `${index * 0.1}s`;
        step.innerHTML = `
            <div class="bg-white p-4 rounded-lg shadow-md h-full flex flex-col items-center text-center card">
                <img src="${chapter.image}" alt="${chapter.name}" class="w-full h-32 object-cover rounded-md mb-4">
                <h4 class="font-bold text-md font-kiwi text-yellow-700">${chapter.round}</h4>
                <p class="font-bold text-lg">${chapter.name}</p>
                <p class="text-sm text-gray-600">${chapter.stage} / ${chapter.rule}</p>
                <p class="text-xs italic mt-2 text-gray-500 flex-grow">"${chapter.theme}"</p>
            </div>
        `;
        journeyStepsContainer.appendChild(step);

        if (index < chaptersData.length - 1) {
            const connector = document.createElement('div');
            connector.className = 'journey-step-connector animated-element';
            connector.style.transitionDelay = `${index * 0.1 + 0.05}s`;
            journeyStepsContainer.appendChild(connector);
        }
    });


    const endingsGrid = document.getElementById('endings-grid');
    endingsData.forEach((ending, index) => {
        const card = document.createElement('div');
        card.className = 'bg-white rounded-lg shadow p-6 text-center border-t-4 animated-element';
        card.style.transitionDelay = `${index * 0.1}s`;
        let borderColorClass = 'border-gray-300';
        if (ending.rank === '1位') borderColorClass = 'border-yellow-400';
        if (ending.rank === '2位') borderColorClass = 'border-blue-300';
        if (ending.rank === '3位') borderColorClass = 'border-green-300';

        card.classList.add(borderColorClass);
        card.innerHTML = `
            <div class="text-3xl mb-3">${ending.icon}</div>
            <p class="font-bold text-lg font-kiwi ${ending.rank === '1位' ? 'text-yellow-500' : 'text-gray-700'}">${ending.rank}</p>
            <h3 class="text-md font-bold text-gray-800">${ending.name}</h3>
            <p class="text-sm text-gray-500 mt-2">撮影地: ${ending.location}</p>
            <p class="text-xs text-gray-500 mt-1 italic">「${ending.description}」</p>
        `;
        endingsGrid.appendChild(card);
    });
    
    // Gemini API Interaction
    const askOracleBtn = document.getElementById('ask-oracle-btn');
    const oracleQuestion = document.getElementById('oracle-question');
    const oracleResponseEl = document.getElementById('oracle-response');
    const oracleBtnText = document.getElementById('oracle-btn-text');
    const oracleLoader = document.getElementById('oracle-loader');

    askOracleBtn.addEventListener('click', async () => {
        const question = oracleQuestion.value.trim();
        if (!question) {
            oracleResponseEl.textContent = '賢者への問いが聞こえぬ...。質問を記入するがよい。';
            oracleResponseEl.classList.remove('hidden');
            return;
        }

        oracleBtnText.textContent = '神託を待て...';
        oracleLoader.classList.remove('hidden');
        askOracleBtn.disabled = true;
        oracleResponseEl.classList.add('hidden');

        const prompt = `あなたは賢者の神託です。以下のスプラトゥーン3に関する質問に対して、TRPGの賢者のような、荘厳で少し古風な口調で、戦略的なアドバイスを与えなさい。回答は必ず150文字以内で簡潔にまとめてください。\n\n質問：${question}`;
        
        try {
             let chatHistory = [];
             chatHistory.push({ role: "user", parts: [{ text: prompt }] });
             const payload = { contents: chatHistory };
             const apiKey = "";
             const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
             
             const response = await fetch(apiUrl, {
                 method: 'POST',
                 headers: { 'Content-Type': 'application/json' },
                 body: JSON.stringify(payload)
             });
             
             if (!response.ok) {
                throw new Error(`API error: ${response.status}`);
             }

             const result = await response.json();
             
             let text = '神託は得られなかった...。しばし時を置いて、再び問いかけるがよい。';
             if (result.candidates && result.candidates.length > 0 &&
                 result.candidates[0].content && result.candidates[0].content.parts &&
                 result.candidates[0].content.parts.length > 0) {
                 text = result.candidates[0].content.parts[0].text;
             }
             oracleResponseEl.textContent = text;
        } catch (error) {
            console.error("Error calling Gemini API:", error);
            oracleResponseEl.textContent = '賢者との交信に失敗した...。しばし時を置いて、再び問いかけるがよい。';
        } finally {
            oracleBtnText.textContent = '神託を授かる';
            oracleLoader.classList.add('hidden');
            askOracleBtn.disabled = false;
            oracleResponseEl.classList.remove('hidden');
        }
    });

    // Scroll Animations
    const animatedElements = document.querySelectorAll('.animated-element');
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
                observer.unobserve(entry.target);
            }
        });
    }, {
        threshold: 0.1
    });

    animatedElements.forEach(el => {
        observer.observe(el);
    });

    // Parallax background
    const parallaxContainer = document.getElementById('parallax-container');
    for (let i = 0; i < 20; i++) {
        const splat = document.createElement('div');
        splat.className = 'parallax-splat';
        const size = Math.random() * 50 + 20;
        splat.style.width = `${size}px`;
        splat.style.height = `${size}px`;
        splat.style.top = `${Math.random() * 100}%`;
        splat.style.left = `${Math.random() * 100}%`;
        splat.dataset.speed = Math.random() * 0.5 + 0.1;
        parallaxContainer.appendChild(splat);
    }
    const parallaxSplats = document.querySelectorAll('.parallax-splat');

    window.addEventListener('scroll', () => {
        const yPos = -window.pageYOffset / 10;
        document.body.style.backgroundPosition = `0 ${yPos}px`;
        
        parallaxSplats.forEach(splat => {
            const speed = splat.dataset.speed;
            const y = -window.pageYOffset * speed;
            splat.style.transform = `translateY(${y}px)`;
        });
    });

    // Title animation
    const mainTitle = document.getElementById('main-title');
    const subTitle = document.getElementById('sub-title');
    const mainTitleText = 'ばーばりあんず Splatoon3大会 2025夏 "PARABLE CUP"';
    const subTitleText = '～君だけの冒険譚を、その手で紡げ～';

    mainTitle.innerHTML = mainTitleText.split('').map(char => `<span>${char}</span>`).join('');
    subTitle.innerHTML = subTitleText.split('').map(char => `<span>${char}</span>`).join('');

    Array.from(mainTitle.children).forEach((span, index) => {
        span.style.animationDelay = `${1.0 + index * 0.03}s`;
    });
    Array.from(subTitle.children).forEach((span, index) => {
        span.style.animationDelay = `${1.0 + mainTitleText.length * 0.03 + index * 0.03}s`;
    });

    // Logo burst animation
    const logoContainer = document.querySelector('.logo-container');
    for (let i = 0; i < 12; i++) {
        const splat = document.createElement('div');
        splat.className = `ink-splat ${i % 2 === 0 ? 'yellow' : ''}`;
        const angle = (i / 12) * 360;
        const radius = 50;
        splat.style.top = `calc(50% + ${Math.sin(angle * Math.PI / 180) * radius}%)`;
        splat.style.left = `calc(50% + ${Math.cos(angle * Math.PI / 180) * radius}%)`;
        splat.style.animationDelay = `${Math.random() * 0.3}s`;
        logoContainer.appendChild(splat);
    }
    
    const navLinks = document.querySelectorAll('nav a');
    const sections = document.querySelectorAll('main section');

    window.addEventListener('scroll', () => {
        let current = '';
        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            if (pageYOffset >= sectionTop - 65) {
                current = section.getAttribute('id');
            }
        });

        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href').substring(1) === current) {
                link.classList.add('active');
            }
        });
    });
});
</script>

</body>
</html>
